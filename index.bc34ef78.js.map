{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,iODSID,EAAAG,SAAQ,EAAAC,EAAAC,eAAcL,EAAAG,OAAOG,aAEjCC,EAAAC,KAAKC,cAAcC,iBAAiB,QAASC,EAAAC,iBAC7CL,EAAAC,KAAKK,sBAAsBH,iBAAiB,QAASI,EAAAC,mBACrDR,EAAAC,KAAKQ,oBAAoBN,iBAAiB,SCIfO,MAAMC,IAC7B,IAAKA,EAAEC,OAAOC,UAAUC,SAAS,cAC7B,OAEJ,MAAMC,EAAWC,mBAAmBL,EAAEC,OAAOK,QAAQC,QAAQC,SAC7D,EAAAC,EAAAC,cACA,IAEI,MAAMC,KAAEA,SAAe3B,EAAA4B,QAAMC,IACzB,mDAAmCT,SACnC,CACIU,OAAQ,CACJ,UAdJ,uCAkBFC,QAAEA,GAAYJ,EACdK,GAAgB,EAAAC,EAAAC,WAAUH,GAE1BI,QAAiB,EAAAjC,EAAAkC,gBAEvB,GAAID,EAAU,CACV,MAAME,GAAa,EAAAC,EAAAC,cAAaP,EAAeG,IAC/C,EAAAK,EAAAC,MAAKC,EAAAC,WAAYN,EACrB,MAAO,EAAAG,EAAAC,MAAKC,EAAAC,WAAYX,IAExB,EAAAY,EAAAC,mBAAiB,EAAAL,EAAAM,MAAKJ,EAAAC,YAAaI,EAAAC,eACnCC,OAAOzC,iBACH,SACA0C,EAAAC,EAAA,EAASnC,KACL,EAAA4B,EAAAC,mBAAiB,EAAAL,EAAAM,MAAKJ,EAAAC,YAAaI,EAAAC,cAAY,GAChD,OAEP,EAAAI,EAAAC,kBACJ,CAAE,MAAOC,IACL,EAAAF,EAAAG,mBACAC,QAAQC,IAAIH,EAChB,EACA,EAAA7B,EAAAiC,aAAS,KDxCb,EAAAC,EAAAC,WACAC,YAAW,MACP,EAAAC,EAAAC,eAAW,GACZ","sources":["src/js/pages/home.js","src/js/categories-filter.js"],"sourcesContent":["import { tokens } from '../..';\nimport { closeDropdownMenu } from '../categories';\nimport { onClickBtns } from '../categories-filter';\nimport { setAuthHeader } from '../db';\nimport { allData } from '../main';\nimport { addDataReadNews } from '../read/add-data-read-more';\nimport { refs } from '../refs';\nimport { onBannerLoad } from '../weather-banner';\n\nif (tokens) setAuthHeader(tokens.accessToken);\n\nrefs.newsContainer.addEventListener('click', addDataReadNews);\nrefs.categoriesDropdownBtn.addEventListener('click', closeDropdownMenu);\nrefs.categoriesContainer.addEventListener('click', onClickBtns);\n\nallData();\nsetTimeout(() => {\n    onBannerLoad();\n}, 300);\n","import axios from 'axios';\nimport { createPagination } from './pagination';\nimport { hideMainContent, showMainContent } from './news-not-found';\nimport { renderGallery } from './templates/render-gallery';\nimport { normalize } from './normalize';\nimport throttle from 'lodash.throttle';\nimport { load, save } from './services/storage';\nimport { refs } from './refs';\nimport { closeDropdownMenu } from './categories';\nimport { loadUserNews } from './db';\nimport { findUserNews } from './find-user-news';\nimport { SEARCH_RES } from './utils/constants';\nimport { hideLoader, showLoader } from './services/toggleLoader';\n\nconst BASE_URL = 'https://api.nytimes.com/svc';\nconst API_KEY = 'e3QVyAs0wF8oNwOW75RSlccT9UsAdwt7';\n\nexport const onClickBtns = async e => {\n    if (!e.target.classList.contains('js-cat-btn')) {\n        return;\n    }\n    const category = encodeURIComponent(e.target.dataset.section.trim());\n    showLoader();\n    try {\n        // виконуємо запит на бекенд з параметрами, відповідними до вибраної категорії\n        const { data } = await axios.get(\n            `${BASE_URL}/news/v3/content/all/${category}.json`,\n            {\n                params: {\n                    'api-key': API_KEY,\n                },\n            }\n        );\n        const { results } = data;\n        const normalizeNews = normalize(results);\n\n        const userNews = await loadUserNews();\n\n        if (userNews) {\n            const sortedNews = findUserNews(normalizeNews, userNews);\n            save(SEARCH_RES, sortedNews);\n        } else save(SEARCH_RES, normalizeNews);\n\n        createPagination(load(SEARCH_RES), renderGallery);\n        window.addEventListener(\n            'resize',\n            throttle(e => {\n                createPagination(load(SEARCH_RES), renderGallery);\n            }, 1000)\n        );\n        showMainContent();\n    } catch (error) {\n        hideMainContent();\n        console.log(error);\n    }\n    hideLoader();\n};\n"],"names":["$2Fivl","parcelRequire","$2shzp","tokens","$jPzW1","setAuthHeader","accessToken","$krGWQ","refs","newsContainer","addEventListener","$fieo1","addDataReadNews","categoriesDropdownBtn","$kV9l4","closeDropdownMenu","categoriesContainer","async","e","target","classList","contains","category","encodeURIComponent","dataset","section","trim","$3ZFuQ","showLoader","data","default","get","params","results","normalizeNews","$3VCkg","normalize","userNews","loadUserNews","sortedNews","$fbuC8","findUserNews","$1ggGL","save","$cropx","SEARCH_RES","$2nhTy","createPagination","load","$5r59o","renderGallery","window","$parcel$interopDefault","$9OeKo","$g1aRn","showMainContent","error","hideMainContent","console","log","hideLoader","$isA1x","allData","setTimeout","$XyOWB","onBannerLoad"],"version":3,"file":"index.bc34ef78.js.map"}