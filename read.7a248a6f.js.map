{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,iECAAA,EAAA,S,2CAKO,MAAMC,EAA0BC,IACnC,MAAMC,GAAW,EAAAC,EAAAC,cAAaH,GAC9B,IAAII,EAAS,GACbH,EAASI,KAAIC,IACT,MACMC,EAAa,0JADN,EAAAC,EAAAC,YAAWH,EAAI,GAAGI,sOAUzBC,EAAaL,EACdD,KACG,EAACO,OACGA,EAAMC,MACNA,EAAKC,QACLA,EAAOC,SACPA,EAAQC,eACRA,EAAcC,IACdA,EAAGC,SACHA,MAEA,IAAIC,EAAc,kBACdC,EAAU,wCAKd,OAJIF,IACAC,EAAc,uBACdC,EAAU,uCAEP,sHAE4BN,yGAEXF,WAAgBC,qEACbI,sCAAwCE,uIAE7CC,mPAK0BP,+EACGE,2EACL,EAAAP,EAAAC,YAC9BO,oDAEOC,iMAGZ,IAGlBI,KAAK,IACVjB,EAASG,EAAaI,EACtBW,EAAAC,KAAKC,cAAcC,mBAAmB,YAAarB,EAAA,GACvD,EDtDCP,EAAA6B,QAKD,EAAAC,EAAAC,cAAa,MAAM,GACdC,MAAKC,KACF,EAAAC,EAAAC,cACIF,EAAKG,OAAS,EAAGlC,EAAwB+B,IACxC,EAAAI,EAAAC,kBAAc,IAEtBC,OAAM,KACH,IAEHC,SAAQ,KAAM,EAAAN,EAAAO,kBAbnB,EAAAJ,EAAAC,mBACAb,EAAAC,KAAKgB,SAASC,UAAUC,OAAO,cAC/B,EAAAC,EAAAC,Y","sources":["src/js/pages/read.js","src/js/templates/render-markup-read.js"],"sourcesContent":["import { tokens } from '../..';\nimport { loadUserNews } from '../db';\nimport { hideMainContent } from '../news-not-found';\nimport { refs } from '../refs';\nimport { hideLoader, showLoader } from '../services/toggleLoader';\nimport { formShow } from '../sign-in-up';\nimport { renderGalleryReadOnDays } from '../templates/render-markup-read';\n\nif (!tokens) {\n    hideMainContent();\n    refs.backdrop.classList.remove('is-hidden');\n    formShow();\n} else\n    loadUserNews(null, true)\n        .then(data => {\n            showLoader();\n            if (data.length > 0) renderGalleryReadOnDays(data);\n            else hideMainContent();\n        })\n        .catch(() => {\n            return;\n        })\n        .finally(() => hideLoader());\n","import { loadUserNews } from '../db';\nimport { refs } from '../refs';\nimport { sortUserNews } from '../read/sort-news-data';\nimport { formatDate } from '../services/format-date';\n\nexport const renderGalleryReadOnDays = userNews => {\n    const newArray = sortUserNews(userNews);\n    let markup = '';\n    newArray.map(arr => {\n        const date = formatDate(arr[0].createdAt);\n        const markupDtae = `\n            <div class=\"news__item-date\">\n                <button class=\"data-read\" type=\"button\">\n                    <p class=\"data-read__text\">${date}</p>\n                    <svg class=\"data-read__icon\" width=\"9\" height=\"14\">\n                        <use xlink:href=\"#icon-arrow-up\"></use>\n                    </svg>\n                </button>\n            </div>`;\n        const markupNews = arr\n            .map(\n                ({\n                    imgUrl,\n                    title,\n                    section,\n                    abstract,\n                    published_date,\n                    url,\n                    favorite,\n                }) => {\n                    let newsBtnText = 'Add to favorite';\n                    let iconUse = '<use href=\"#icon-heart-border\"></use>';\n                    if (favorite) {\n                        newsBtnText = 'Remove from favorite';\n                        iconUse = '<use href=\"#icon-heart-fill\"></use>';\n                    }\n                    return `\n                        <div class=\"news__item-read hide\">\n                            <p class=\"news__section\">${section}</p>\n                            <div class=\"news__img\">\n                                <img src=\"${imgUrl}\" alt=\"${title}\" loading=\"lazy\"/>\n                                <button  id=\"${url}\" type=\"button\" class=\"news__btn\">${newsBtnText}\n                                    <svg class=\"news__btn-icon\" width=\"20\" height=\"20\">\n                                        ${iconUse}\n                                    </svg>\n                                </button>\n                            </div>\n                            <div class=\"info\">\n                                <p class=\"info__title line-clamp\">${title}</p>\n                                <p class=\"info__abstract line-clamp\">${abstract}</p>\n                                <p class=\"info__published-date\">${formatDate(\n                                    published_date\n                                )}</p>\n                                <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\n                                    class=\"info__link\">Read more</a>\n                            </div>\n                        </div>`;\n                }\n            )\n            .join('');\n        markup = markupDtae + markupNews;\n        refs.readContainer.insertAdjacentHTML('beforeend', markup);\n    });\n};\n"],"names":["$fSCrk","parcelRequire","$e5b720537d9b6f6b$export$b0f402b6b7c96fe0","userNews","newArray","$dKQcw","sortUserNews","markup","map","arr","markupDtae","$jxyy8","formatDate","createdAt","markupNews","imgUrl","title","section","abstract","published_date","url","favorite","newsBtnText","iconUse","join","$4Nugj","refs","readContainer","insertAdjacentHTML","tokens","$7hrFt","loadUserNews","then","data","$5eBNf","showLoader","length","$aDvOz","hideMainContent","catch","finally","hideLoader","backdrop","classList","remove","$cJ2zd","formShow"],"version":3,"file":"read.7a248a6f.js.map"}