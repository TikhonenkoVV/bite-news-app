{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,iECAAA,EAAA,S,2CCAO,MAAMC,EAAqBC,IAC9B,GAAyB,WAArBA,EAAEC,OAAOC,QAAsB,CAC/B,MAAMC,EAAQH,EAAEC,OAAOG,aAAa,MACpCJ,EAAEC,OAAOI,UAAUC,OAAO,YAC1BC,SAASC,cAAc,IAAIL,KAASE,UAAUC,OAAO,OAEzD,GDASG,EAA0BC,IACnC,MAAMC,GAAW,EAAAC,EAAAC,cAAaH,GAC9B,IAAII,EAAS,GACbH,EAASI,KAAIC,IACT,MAAMC,GAAO,EAAAC,EAAAC,YAAWH,EAAI,GAAGI,WACzBC,EAAY,SAAQ,EAAAH,EAAAI,iBAAgBN,EAAI,GAAGI,aACjDN,EAAOS,KAAK,4EAEUF,4DACRJ,wPAK6BI,OAE3CL,EAAID,KACA,EAACS,OACGA,EAAMC,MACNA,EAAKC,QACLA,EAAOC,SACPA,EAAQC,eACRA,EAAcC,IACdA,EAAGC,SACHA,MAEA,IAAIC,EAAc,kBACdC,EAAU,wCACVF,IACAC,EAAc,uBACdC,EAAU,uCAEdlB,EAAOS,KAAK,iHAE2BG,yGAEXF,WAAgBC,qEACbI,sCAAwCE,uIAE7CC,mPAK0BP,+EACGE,2EACL,EAAAT,EAAAC,YAC9BS,oDAEOC,kMAGZ,IAIvBf,EAAOS,KAAK,uCAEX,IAELU,EAAAC,KAAKC,cAAcC,mBAAmB,YAAatB,EAAOuB,KAAK,KAC/DJ,EAAAC,KAAKC,cAAcG,iBAAiB,QAASvC,EAAiB,ED3D7DF,EAAA0C,QAKD,EAAAC,EAAAC,cAAa,MAAM,GACdC,MAAKC,KACF,EAAAC,EAAAC,cACIF,EAAKG,OAAS,EAAGrC,EAAwBkC,IACxC,EAAAI,EAAAC,kBAAc,IAEtBC,OAAM,KACH,IAEHC,SAAQ,KAAM,EAAAN,EAAAO,kBAbnB,EAAAJ,EAAAC,mBACAf,EAAAC,KAAKkB,SAAS/C,UAAUgD,OAAO,cAC/B,EAAAC,EAAAC,Y","sources":["src/js/pages/read.js","src/js/templates/render-markup-read.js","src/js/read/readNewsBtnClick.js"],"sourcesContent":["import { tokens } from '../..';\nimport { loadUserNews } from '../db';\nimport { hideMainContent } from '../news-not-found';\nimport { refs } from '../refs';\nimport { hideLoader, showLoader } from '../services/toggleLoader';\nimport { formShow } from '../sign-in-up';\nimport { renderGalleryReadOnDays } from '../templates/render-markup-read';\n\nif (!tokens) {\n    hideMainContent();\n    refs.backdrop.classList.remove('is-hidden');\n    formShow();\n} else\n    loadUserNews(null, true)\n        .then(data => {\n            showLoader();\n            if (data.length > 0) renderGalleryReadOnDays(data);\n            else hideMainContent();\n        })\n        .catch(() => {\n            return;\n        })\n        .finally(() => hideLoader());\n","import { loadUserNews } from '../db';\nimport { refs } from '../refs';\nimport { sortUserNews } from '../read/sort-news-data';\nimport { formatClassName, formatDate } from '../services/format-date';\nimport { hndleReadNewsClick } from '../read/readNewsBtnClick';\n\nexport const renderGalleryReadOnDays = userNews => {\n    const newArray = sortUserNews(userNews);\n    let markup = [];\n    newArray.map(arr => {\n        const date = formatDate(arr[0].createdAt);\n        const className = `date-${formatClassName(arr[0].createdAt)}`;\n        markup.push(`\n            <div class=\"news__item-date\">\n                <button id=\"${className}\" class=\"data-read\" type=\"button\">\n                    ${date}\n                    <svg class=\"data-read__icon\" width=\"9\" height=\"14\">\n                        <use xlink:href=\"#icon-arrow-up\"></use>\n                    </svg>\n                </button>\n                <div class=\"data-read__news hide ${className}\">`);\n\n        arr.map(\n            ({\n                imgUrl,\n                title,\n                section,\n                abstract,\n                published_date,\n                url,\n                favorite,\n            }) => {\n                let newsBtnText = 'Add to favorite';\n                let iconUse = '<use href=\"#icon-heart-border\"></use>';\n                if (favorite) {\n                    newsBtnText = 'Remove from favorite';\n                    iconUse = '<use href=\"#icon-heart-fill\"></use>';\n                }\n                markup.push(`\n                        <div class=\"news__item-read\">\n                            <p class=\"news__section\">${section}</p>\n                            <div class=\"news__img\">\n                                <img src=\"${imgUrl}\" alt=\"${title}\" loading=\"lazy\"/>\n                                <button  id=\"${url}\" type=\"button\" class=\"news__btn\">${newsBtnText}\n                                    <svg class=\"news__btn-icon\" width=\"20\" height=\"20\">\n                                        ${iconUse}\n                                    </svg>\n                                </button>\n                            </div>\n                            <div class=\"info\">\n                                <p class=\"info__title line-clamp\">${title}</p>\n                                <p class=\"info__abstract line-clamp\">${abstract}</p>\n                                <p class=\"info__published-date\">${formatDate(\n                                    published_date\n                                )}</p>\n                                <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"\n                                    class=\"info__link\">Read more</a>\n                            </div>\n                        </div>`);\n            }\n        );\n\n        markup.push(`</div>\n            </div>\n        `);\n    });\n    refs.readContainer.insertAdjacentHTML('beforeend', markup.join(''));\n    refs.readContainer.addEventListener('click', hndleReadNewsClick);\n};\n","export const hndleReadNewsClick = e => {\n    if (e.target.tagName === 'BUTTON') {\n        const btnId = e.target.getAttribute('id');\n        e.target.classList.toggle('expanded');\n        document.querySelector(`.${btnId}`).classList.toggle('hide');\n        // console.log(e.target.getAttribute('id'));\n    }\n};\n"],"names":["$fSCrk","parcelRequire","$a5b567d19450c206$export$de4aa43b67c8153b","e","target","tagName","btnId","getAttribute","classList","toggle","document","querySelector","$e5b720537d9b6f6b$export$b0f402b6b7c96fe0","userNews","newArray","$dKQcw","sortUserNews","markup","map","arr","date","$jxyy8","formatDate","createdAt","className","formatClassName","push","imgUrl","title","section","abstract","published_date","url","favorite","newsBtnText","iconUse","$4Nugj","refs","readContainer","insertAdjacentHTML","join","addEventListener","tokens","$7hrFt","loadUserNews","then","data","$5eBNf","showLoader","length","$aDvOz","hideMainContent","catch","finally","hideLoader","backdrop","remove","$cJ2zd","formShow"],"version":3,"file":"read.844aa0ad.js.map"}